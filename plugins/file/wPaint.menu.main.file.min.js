/*! wPaint - v2.0.0 - 2013-08-30 */!function(a){var b="/plugins/file/img/icons-menu-main-file.png",c=["/uploads/wPaint-1.png","/uploads/wPaint-2.png","/uploads/wPaint-3.png","/uploads/wPaint-4.png","/uploads/wPaint-5.png","/uploads/wPaint-6.png"];a.extend(!0,a.fn.wPaint.menus.main.items,{save:{icon:"generic",title:"Save Image",img:b,index:0,callback:function(){this.options.saveImg.apply(this,[this.getImage()])}},loadBg:{icon:"generic",group:"loadImg",title:"Load Image to Foreground",img:b,index:2,callback:function(){this.options.loadImgFg.apply(this,[])}},loadFg:{icon:"generic",group:"loadImg",title:"Load Image to Background",img:b,index:1,callback:function(){this.options.loadImgBg.apply(this,[])}}}),a.extend(a.fn.wPaint.defaults,{imageList:[],saveImg:function(b){var d=this;a.ajax({type:"POST",url:"/upload.php",data:{image:b},success:function(b){b=a.parseJSON(b),c.push(b.img),d._displayStatus("Image saved successfully")}})},loadImgFg:function(){this._showFileModal("fg",c)},loadImgBg:function(){this._showFileModal("bg",c)}}),a.fn.wPaint.extend({_showFileModal:function(b,c){function d(a,b){function c(c){c.stopPropagation(),"fg"===a?e.setImage(b):"bg"===a&&e.setBg(b)}g.on("click",c)}for(var e=this,f=a("<div></div>"),g=null,h=0,i=c.length;i>h;h++)g=a('<img class="wPaint-modal-img"/>').attr("src",c[h]),g=a('<div class="wPaint-modal-img-holder"></div>').append(g),d(b,c[h]),f.append(g);this._showModal(f)}})}(jQuery);